<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Critical System Error</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin:0;
  background:#0078D7;
  color:white;
  font-family:"Segoe UI", Arial, sans-serif;
  overflow:hidden;
  cursor:none;
}

#screen {
  padding:60px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.face {
  font-size:120px;
  font-weight:300;
}

.message {
  font-size:28px;
  line-height:1.5;
  text-align:center;
  margin-top:20px;
}

.progress {
  margin-top:40px;
  font-size:24px;
}

.footer {
  position:absolute;
  bottom:40px;
  font-size:14px;
  opacity:.9;
}

#reboot {
  display:none;
  font-size:26px;
  margin-top:50px;
}

@keyframes flicker {
  0%,97%,100%{filter:none;}
  98%{filter:brightness(1.4);}
  99%{filter:brightness(0.6);}
}

.glitch {animation:flicker 7s infinite;}
</style>
</head>
<body class="glitch">

<div id="screen">
  <div class="face">:(</div>
  <div class="message">
    Your PC ran into a problem and needs to restart.<br>
    We're just collecting some error info, and then we'll restart for you.
  </div>
  <div class="progress"><span id="percent">0%</span>% complete</div>
  <div id="reboot">Rebootingâ€¦</div>
  <div class="footer">(Hold ESC Ã—3 to exit)</div>
</div>

<script>
// ðŸŽµ Optional Windows beep
function beep(){
  const ctx=new (window.AudioContext||window.webkitAudioContext)();
  const o=ctx.createOscillator();
  const g=ctx.createGain();
  o.connect(g); g.connect(ctx.destination);
  o.frequency.value=180;
  o.type="square";
  g.gain.value=0.05;
  o.start();
  setTimeout(()=>o.stop(),120);
}
setTimeout(beep,800);

// ðŸ“Š Progress animation with pauses
let p=0;
const el=document.getElementById("percent");
function step(){
  if(p>=100){
    document.getElementById("reboot").style.display="block";
    return;
  }
  let delay=Math.random()*400+100;
  if([23,47,76].includes(p)) delay=2500;
  p+=Math.floor(Math.random()*2)+1;
  if(p>100) p=100;
  el.textContent=p;
  setTimeout(step,delay);
}
setTimeout(step,700);

// ðŸ–¥ï¸ Fullscreen
document.documentElement.requestFullscreen?.().catch(()=>{});

// ðŸ” Safe exit â€” hold ESC 3 seconds
let escTimer=null;
let escCount=0;
document.addEventListener("keydown", e=>{
  if(e.key==="Escape"){
    escCount++;
    escTimer=setTimeout(()=>{
      document.exitFullscreen?.();
      document.body.style.cursor="default";
    },3000);
  }
});
document.addEventListener("keyup", e=>{
  if(e.key==="Escape" && escTimer){clearTimeout(escTimer);}
});

// Ignore clicks for realism
document.addEventListener("click", e=>{e.preventDefault();});

</script>

</body>
</html>
